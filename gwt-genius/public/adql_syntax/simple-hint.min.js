!function(){function a(a,b){for(var c=0,d=a.length;d>c;++c)b(a[c])}function b(a,b){if(!Array.prototype.indexOf){for(var c=a.length;c--;)if(a[c].toUpperCase()===b.toUpperCase())return!0;return!1}var d=a.map(function(a){return a.toLowerCase()});return-1!=d.indexOf(b.toLowerCase())}function c(c,d,e,f){function g(a){0!=a.toLowerCase().indexOf(j.toLowerCase())||b(i,a)||i.push(a)}function h(b){"string"==typeof b?a(availableTags,g):b instanceof Array?a(availableTags,g):b instanceof Function&&a(availableTags,g);for(var c in b)g(c)}var i=[],j=c.string;if(d){var k,l=d.pop();for(0===l.type.indexOf("variable")?(f&&f.additionalContext&&(k=f.additionalContext[l.string]),k=k||window[l.string]):"string"==l.type?k="":"atom"==l.type?k=1:"function"==l.type&&(null==window.jQuery||"$"!=l.string&&"jQuery"!=l.string||"function"!=typeof window.jQuery?null!=window._&&"_"==l.string&&"function"==typeof window._&&(k=window._()):k=window.jQuery());null!=k&&d.length;)k=k[d.pop().string];null!=k&&h(k)}else a(e,g);return i.sort()}function d(a,b,d,e){var f=a.getCursor(),g=d(a,f),h=g;for(/^[\w$_]*$/.test(g.string)||(g=h={start:f.ch,end:f.ch,string:"",state:g.state,type:"."==g.string?"null":null});"property"==h.type;){if(h=d(a,{line:f.line,ch:h.start}),h=d(a,{line:f.line,ch:h.start}),")"==h.string){var i=1;do switch(h=d(a,{line:f.line,ch:h.start}),h.string){case")":i++;break;case"(":i--}while(i>0);if(h=d(a,{line:f.line,ch:h.start}),0!==h.type.indexOf("variable"))return;h.type="function"}if(!j)var j=[];j.push(h)}return{list:c(g,j,b,e),from:{line:f.line,ch:g.start},to:{line:f.line,ch:g.end}}}CodeMirror.simpleHint=function(a,b,c){function d(f){function g(b){a.replaceRange(b,k.from,k.to)}function h(){s||(s=!0,m.parentNode.removeChild(m))}function i(){g(l[n.selectedIndex]),h(),setTimeout(function(){a.focus()},50)}if(!a.somethingSelected()){var j=a.getTokenAt(a.getCursor());if(!e.closeOnTokenChange||null==f||j.start==f.start&&j.type==f.type){var k=b(a,c);if(k&&k.list.length){var l=k.list;if(e.completeSingle&&1==l.length)return g(l[0]),!0;var m=document.createElement("div");m.className="CodeMirror-completions";var n=m.appendChild(document.createElement("select"));window.opera||(n.multiple=!0);for(var o=0;o<l.length;++o){var p=n.appendChild(document.createElement("option"));p.appendChild(document.createTextNode(l[o]))}n.firstChild.selected=!0,n.size=Math.min(10,l.length);var q=a.cursorCoords(e.alignWithWord?k.from:null);m.style.left=q.left+"px",m.style.top=q.bottom+"px",document.body.appendChild(m);var r=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth);r-q.left<n.clientWidth&&(m.style.left=q.left-n.clientWidth+"px"),l.length<=10&&(m.style.width=n.clientWidth-1+"px");var s=!1;return CodeMirror.on(n,"blur",h),CodeMirror.on(n,"keydown",function(b){var c=b.keyCode;13==c?(CodeMirror.e_stop(b),i()):27==c?(CodeMirror.e_stop(b),h(),a.focus()):38==c||40==c||33==c||34==c||CodeMirror.isModifierKey(b)||(h(),a.focus(),a.triggerOnKeyDown(b),e.closeOnBackspace&&8==c||setTimeout(function(){d(j)},50))}),CodeMirror.on(n,"dblclick",i),n.focus(),window.opera&&setTimeout(function(){s||n.focus()},100),!0}}}}var e={},f=CodeMirror.simpleHint.defaults;for(var g in f)f.hasOwnProperty(g)&&(e[g]=(c&&c.hasOwnProperty(g)?c:f)[g]);return d()},CodeMirror.simpleHint.defaults={closeOnBackspace:!0,closeOnTokenChange:!1,completeSingle:!0,alignWithWord:!0},CodeMirror.adqlHint=function(a,b){return d(a,availableTags,function(a,b){return a.getTokenAt(b)},b)}}();